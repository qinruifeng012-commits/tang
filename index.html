<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light">
    <title>Hi - To å”å˜‰ç²</title>
    
    <style>
        /* ================== CSS æ ·å¼ ================== */
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #F0F8FF;
            overflow: hidden; 
            color-scheme: light; 
        }

        /* ä¸»å®¹å™¨ */
        #main-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }

        h1 {
            font-size: 28px;
            color: #333333;
            margin-bottom: 30px;
        }

        /* æŒ‰é’®æ ·å¼ */
        button {
            width: 220px;
            height: 50px;
            font-size: 18px;
            color: white;
            background-color: #007AFF;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-weight: 500;
        }
        button:hover {
            background-color: #005bb5;
        }

        /* ================== éŸ³ä¹æ§ä»¶æ ·å¼ ================== */
        #music-control {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 40px;
            height: 40px;
            line-height: 40px;
            text-align: center;
            font-size: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            z-index: 1001; /* ç¡®ä¿å®ƒåœ¨æœ€é¡¶å±‚ */
            transition: background-color 0.2s;
        }
        #music-control:hover {
            background-color: rgba(255, 255, 255, 1);
        }

        /* ================== åŠ¨ç”»å®šä¹‰ ================== */
        @keyframes popup-appear {
            from {
                opacity: 0;
                transform: scale(0.1); 
            }
            to {
                opacity: 1;
                transform: scale(1); 
            }
        }

        /* ================== å¼¹çª—æ ·å¼ ================== */

        /* éšæœºå¼¹çª—çš„é€šç”¨æ ·å¼ */
        .popup {
            position: absolute;
            font-size: 14px;
            color: #333333;
            border-radius: 12px; 
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            z-index: 5; /* åˆå§‹å±‚çº§è¾ƒä½ */
            text-align: center;
            max-width: 220px;
            min-height: 70px; 
            transition: opacity 0.3s;
            cursor: grab;
            display: flex; 
            flex-direction: column;
            overflow: hidden; 
            transform-origin: center center; 
            color-scheme: light; 
            touch-action: none; /* ä¼˜åŒ–ï¼šé¿å…åœ¨æ‹–åŠ¨æ—¶è§¦å‘æµè§ˆå™¨æ‰‹åŠ¿ */
        }

        /* åŠ¨ç”»è§¦å‘ç±»ï¼šä»…å¯¹éšæœºå¼¹çª—æ·»åŠ åŠ¨ç”» */
        .popup-animate {
            animation: popup-appear 0.3s ease-out forwards; 
        }

        /* å¼¹çª—æ ‡é¢˜æ ·å¼ */
        .popup-title {
            font-size: 12px; 
            font-weight: bold;
            color: #555555;
            background-color: rgba(255, 255, 255, 0.7); 
            padding: 5px 10px;
            border-top-left-radius: 10px; 
            border-top-right-radius: 10px;
            text-align: left;
            user-select: none; 
            cursor: grab; 
        }
        /* å¼¹çª—å†…å®¹æ ·å¼ */
        .popup-content {
            padding: 10px 15px; 
            flex-grow: 1; 
            display: flex; 
            align-items: center;
            justify-content: center;
            word-break: break-word; 
        }
        
        /* æœ€ç»ˆå±…ä¸­å¼¹çª— */
        #center-modal-content {
            position: absolute; 
            background-color: white;
            padding: 0;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            text-align: center;
            width: 300px;
            max-width: 90%; 
            z-index: 1000; /* æœ€é«˜å±‚çº§ */
            cursor: grab;
            overflow: hidden; 
            color-scheme: light; 
        }

        /* ä¸“é—¨å¤„ç† hidden å±æ€§çš„æ ·å¼ */
        #center-modal-content:not([hidden]) {
            display: flex; 
            flex-direction: column;
        }

        #center-modal-title {
            font-size: 14px;
            font-weight: bold;
            color: #555555;
            background-color: #f0f0f0; 
            padding: 8px 15px;
            text-align: left;
            user-select: none;
            cursor: grab;
            flex-shrink: 0; 
        }

        #center-modal-body {
            padding: 20px 30px 30px; 
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #modal-content-p {
            font-size: 18px;
            font-weight: 600;
            color: #333333;
            margin-bottom: 25px;
        }
    </style>
</head>
<body>

    <div id="main-box">
        <h1>helloğŸ‘€</h1>
        <button id="startButton">æˆ‘æ˜¯æŒ‰é’®ï¼Œè¯·ç‚¹å‡»æˆ‘</button>
    </div>

    <div id="music-control">
        <span id="music-icon">ğŸ¶</span> </div>
    <audio id="bg-music" loop src="12æœˆ1æ—¥.MP3"></audio>

    <div id="center-modal-content" hidden>
        <div id="center-modal-title">To å”å˜‰ç²</div>
        <div id="center-modal-body">
            <p id="modal-content-p">åŠ æ²¹å§ï¼Œåˆ«å¿˜è®°ç”Ÿæ´»çš„å¤šå½©ï¼ï¼ï¼</p>
            <button id="closeButton">å…³é—­æ‰€æœ‰å¼¹çª—ï¼Œç»§ç»­çƒ­çˆ±ç”Ÿæ´»ï¼</button>
        </div>
    </div>

    <script>
        /* ================== JavaScript é€»è¾‘ ================== */

        const Count_message = 50;       
        const Delay = 100;              
        let Message_counting = 0;     
        let timerId = null;           
        let currentZIndex = 5; // ç”¨äºåŠ¨æ€æå‡éšæœºå¼¹çª—å±‚çº§
        
        const messages = [
            "ä»Šå¤©è¿‡å¾—å¥½å—ï¼Ÿãƒ¾(â‰§â–½â–½*)o", "å¤©æ°”ä¸é”™å§ï¼Œæœ‰ä¸‹é›¨å—ï¼ŸğŸŒ§ï¸", "æœ‰æ²¡æœ‰å‡ºå»èµ°èµ°å•Šï¼Ÿ<(ï¿£ï¸¶ï¿£)â†—[GO!]",
            "è¦ä¸åˆ†äº«ä¸€ä¸‹ä½ æœ€è¿‘çœ‹çš„ä¹¦ï¼ŸğŸ“šğŸ“–", "å¤©å†·äº†ï¼Œæ˜¯ä¸æ˜¯è¦åŠ ä¸€ä»¶è¡£æœå•Šï¼Ÿâ„ï¸", "è®°å¾—å¤šå–æ°´ï¼ğŸ¥¤O(âˆ©_âˆ©)O",
            "æ¯å¤©éƒ½è¦è®°å¾—é”»ç‚¼å“¦ï¼o(^â–½^)o", "æœ‰æ²¡æœ‰å¥½å¥½åƒé¥­ï¼ŸğŸ‘€æ—©é¥­ä¹Ÿæ˜¯è¦å¥½å¥½åƒçš„å“¦o(ã€ƒï¼¾â–½â–½ã€ƒ)o",
            "æœ‰é‡åˆ°ä»€ä¹ˆçƒ¦å¿ƒäº‹å—ï¼Ÿè¯·ä¸€å®šè®°ä½ä¼šå¥½èµ·æ¥ğŸ’•â•°(*Â°â–½Â°*)â•¯", "ä»Šå¤©çš„å¤•é˜³ç¾ä¸ç¾ï¼Ÿå¿«æ‹ç»™æˆ‘çœ‹çœ‹ï¼ğŸŒ‡(âËƒá†ºË‚)",
            "æ–°çš„ä¸€å¤©ï¼Œä¹Ÿè¦å…ƒæ°”æ»¡æ»¡ï¼å†²é¸­ï¼ğŸš€v(ï¿£ï¸¶ï¿£)v", "å‘Šè¯‰ä½ ä¸€ä¸ªç§˜å¯†ï¼šä½ ç¬‘èµ·æ¥æœ€å¥½çœ‹ï¼(â˜… Ï‰ â˜…)",
            "æœ‰æ²¡æœ‰ä»€ä¹ˆå°æ„¿æœ›ä»Šå¤©å®ç°äº†å‘¢ï¼Ÿâœ¨(ï¾‰â—•ãƒ®ãƒ®)ï¾‰*:ï½¥ï¾Ÿâœ§", "ä»Šå¤©ä¹Ÿæ˜¯åŠªåŠ›å‘å…‰çš„å°å¤ªé˜³å‘¢ï¼â˜€ï¸âœ§(â‰– â—¡ â‰–âœ¿)",
            "è®°å¾—ç»™å®¶é‡Œçš„èŠ±èŠ±æµ‡æµ‡æ°´å“¦ï¼ğŸŒ¼(â—Â´Ï‰ï½€â—)", "åˆ†äº«ä¸€ä¸ªä»Šå¤©é‡åˆ°çš„å°ç¡®å¹¸ç»™æˆ‘å§ï¼ğŸ€(à¹‘Â¯â—¡Â¯à¹‘)",
            "æœ‰æ²¡æœ‰è¢«ä»€ä¹ˆæœ‰è¶£çš„äº‹æƒ…é€—ç¬‘ï¼ŸğŸ˜†å“ˆå“ˆå“ˆï¼", "ä½ åŠªåŠ›çš„æ ·å­ï¼ŒçœŸçš„è¶…è¿·äººçš„ï¼ğŸ˜‰(â˜…^O^â˜…)",
            "å¤©æ°”å¹²ç‡¥ï¼Œè®°å¾—æ¶‚æ¶¦å”‡è†å“¦ï¼ğŸ‘„", "ä»Šå¤©æœ‰æ²¡æœ‰å­¦åˆ°ä»€ä¹ˆæ–°çŸ¥è¯†å‘€ï¼ŸğŸ“(ãƒ»Ï‰<)â˜…",
            "é¢œè¡¨æƒ…çº¯äº«ç‰ˆ{(âœ¿â— â€¿â— ) (*â‰§ï¸¶â‰¦))(ï¿£â–½â–½* )ã‚ (pâ‰§wâ‰¦q)}", "æ™šä¸Šè¦æ—©ç‚¹ä¼‘æ¯ï¼Œä¸è¦å½“å¤œçŒ«å­å“¦ï¼ğŸŒ™(ï½ï¹ƒï½)~zZ",
            "ä»Šå¤©æœ‰æ²¡æœ‰å¯¹è‡ªå·±å¥½ä¸€ç‚¹ï¼Ÿ (Â´,,â€¢Ï‰â€¢,,)â™¡", "ä¸ç®¡å‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½ä¼šåœ¨è¿™é‡Œä¸ºä½ åŠ æ²¹ï¼ğŸ‰â•°(Â°â–½Â°)â•¯",
            "æ—©ä¸Šèµ·åºŠåæœ‰æ²¡æœ‰ä¼¸ä¸ªå¤§å¤§çš„æ‡’è…°å‘€ï¼ŸğŸŒâ•°(ï¿£â–½ï¿£)â•­", "å‚æ™šçš„é£æ¸©æŸ”å—ï¼Ÿæœ‰æ²¡æœ‰å¸¦æ¥ç§‹å¤©çš„å‘³é“ï¼ŸğŸ‚(ï½ï¿£â–½â–½)ï½",
            "å¦‚æœä»Šå¤©æœ‰ç‚¹è¾›è‹¦ï¼Œé‚£è¯´æ˜ä½ åœ¨ä¸Šå¡è·¯å‘€ï¼åŠ æ²¹ï¼ğŸ’ª(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§", "ä»Šå¤©æœ‰æ²¡æœ‰å“ªä¸ªç¬é—´ï¼Œè§‰å¾—è‡ªå·±è¶…çº§å‰å®³ï¼ŸğŸ‘‘(â˜… Ï‰ â˜…)",
            "ç¡å‰å¯ä»¥æƒ³æƒ³å¼€å¿ƒçš„äº‹ï¼Œè¿™æ ·æ¢¦éƒ½ä¼šæ˜¯ç”œçš„å“¦ï¼ğŸ­(âœ¿â— â€¿â— )", "ä½ çŸ¥ä¸çŸ¥é“ï¼Œä½ å¯¹æˆ‘è€Œè¨€æ˜¯éå¸¸éå¸¸é‡è¦çš„äººï¼ğŸ’•(â—'â—¡'â—)",
        ];

        const backgroudColors = [
            "#FFDAB9", "#B0E0E6", "#C1FFC1", 
            "#FFE4B5", "#F0E68C", "#FFFACD", 
            "#D8BFD8", "#FFB6C1", "#E6E6FA", 
        ];

        const startButton = document.getElementById('startButton');
        const mainBox = document.getElementById('main-box');
        const centerModalContent = document.getElementById('center-modal-content'); 
        const closeButton = document.getElementById('closeButton');
        const body = document.body;
        const centerModalTitle = document.getElementById('center-modal-title');
        
        const musicControl = document.getElementById('music-control');
        const musicIcon = document.getElementById('music-icon');
        const bgMusic = document.getElementById('bg-music');

        // ================== éŸ³ä¹æ§åˆ¶é€»è¾‘ ==================

        function toggleMusic() {
            if (bgMusic.paused) {
                // æ³¨æ„ï¼šåœ¨ç§»åŠ¨ç«¯ï¼Œautoplayé€šå¸¸è¢«ç¦æ­¢ï¼Œæ’­æ”¾æ“ä½œå¿…é¡»ç”±ç”¨æˆ·æ‰‹åŠ¿è§¦å‘ã€‚
                // é¦–æ¬¡ç‚¹å‡»æ—¶ï¼Œå…ˆå°è¯•æ’­æ”¾
                bgMusic.play().then(() => {
                    musicIcon.textContent = 'ğŸ¶'; // æ’­æ”¾å›¾æ ‡
                }).catch(error => {
                    // æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯æµè§ˆå™¨é˜»æ­¢äº†ï¼Œä¿æŒæš‚åœå›¾æ ‡
                    musicIcon.textContent = 'ğŸ”‡'; 
                    console.log("éŸ³ä¹è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼Œè¯·ç¡®ä¿åœ¨ç”¨æˆ·äº¤äº’åè°ƒç”¨ play()");
                });
            } else {
                bgMusic.pause();
                musicIcon.textContent = 'ğŸ”‡'; // æš‚åœå›¾æ ‡
            }
        }
        
        musicControl.addEventListener('click', toggleMusic);

        // ================== å¯æ‹–åŠ¨å‡½æ•° (æ”¯æŒè§¦æ‘¸å± & æå‡å±‚çº§) ==================

        function makeElementDraggable(element, handle = element) { 
            let pos3 = 0, pos4 = 0; 
            let isDragging = false; 
            let isClicked = false; // æ–°å¢ï¼šç”¨äºåˆ¤æ–­æ˜¯å¦åªæ˜¯å•çº¯çš„ç‚¹å‡»

            function getClientCoords(e) {
                if (e.touches) {
                    return { clientX: e.touches[0].clientX, clientY: e.touches[0].clientY };
                }
                return { clientX: e.clientX, clientY: e.clientY };
            }

            function dragStart(e) {
                // é˜»æ­¢ç§»åŠ¨ç«¯é»˜è®¤çš„æ»šåŠ¨è¡Œä¸º
                if (e.touches && e.cancelable) {
                    e.preventDefault();
                }

                // å¦‚æœæ˜¯æŒ‰é’®è¢«ç‚¹å‡»ï¼Œä¸å¼€å§‹æ‹–åŠ¨
                if (e.target.tagName === 'BUTTON') return;

                const coords = getClientCoords(e);
                isClicked = true; // å‡è®¾æ˜¯ç‚¹å‡»
                isDragging = true;
                pos3 = coords.clientX;
                pos4 = coords.clientY;
                
                // ä»…å½“æ˜¯éšæœºå¼¹çª—æ—¶ï¼Œæå‡å±‚çº§åˆ°ä»…æ¬¡äºæœ€ç»ˆå¼¹çª—çš„é¡¶å±‚ (1000 - 1)
                if (element.className.includes('popup')) {
                     element.style.zIndex = ++currentZIndex;
                } else {
                     element.style.zIndex = 1000; // æœ€ç»ˆå¼¹çª—å›ºå®šå±‚çº§
                }

                // ç»‘å®šäº‹ä»¶
                if (e.touches) {
                    document.ontouchend = dragEnd;
                    document.ontouchmove = elementDrag;
                } else {
                    document.onmouseup = dragEnd;
                    document.onmousemove = elementDrag;
                }
            }

            function elementDrag(e) {
                if (!isDragging) return;
                
                // é˜»æ­¢ç§»åŠ¨ç«¯é»˜è®¤çš„æ»šåŠ¨è¡Œä¸º
                if (e.touches && e.cancelable) {
                    e.preventDefault();
                }

                isClicked = false; // æ‹–åŠ¨å‘ç”Ÿï¼Œä¸æ˜¯å•çº¯çš„ç‚¹å‡»

                const coords = getClientCoords(e);
                
                let pos1 = pos3 - coords.clientX; 
                let pos2 = pos4 - coords.clientY; 
                pos3 = coords.clientX; 
                pos4 = coords.clientY; 
                
                let newTop = element.offsetTop - pos2;
                let newLeft = element.offsetLeft - pos1;
                
                // è¾¹ç•Œé™åˆ¶
                newTop = Math.max(0, Math.min(newTop, window.innerHeight - element.offsetHeight));
                newLeft = Math.max(0, Math.min(newLeft, window.innerWidth - element.offsetWidth));

                element.style.top = newTop + "px";
                element.style.left = newLeft + "px";
            }

            function dragEnd(e) {
                isDragging = false;
                
                // å¦‚æœæ˜¯ç‚¹å‡»äº‹ä»¶ï¼ˆæ²¡æœ‰è¿›è¡Œæ‹–åŠ¨ï¼‰ï¼Œä¸”ä¸æ˜¯æœ€ç»ˆå¼¹çª—
                if (isClicked && element.className.includes('popup')) {
                     // å†æ¬¡ç¡®è®¤å±‚çº§æå‡ï¼ˆè™½ç„¶å·²åœ¨ dragStart ä¸­å¤„ç†ï¼‰
                     element.style.zIndex = ++currentZIndex;
                }
                
                // ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬
                document.onmouseup = null;
                document.onmousemove = null;
                document.ontouchend = null;
                document.ontouchmove = null;
                
                // æ¢å¤ Z-index çš„é€»è¾‘ç®€åŒ–ï¼šå› ä¸ºæˆ‘ä»¬åœ¨ dragStart ä¸­å·²ç»æå‡äº†éšæœºå¼¹çª—çš„å±‚çº§ï¼Œæ— éœ€åœ¨æ­¤æ¢å¤
                if (!element.className.includes('popup')) {
                    element.style.zIndex = 1000; // æœ€ç»ˆå¼¹çª—å›ºå®šå±‚çº§
                }
            }
            
            // ç»‘å®šé¼ æ ‡äº‹ä»¶
            handle.onmousedown = dragStart;
            // ç»‘å®šè§¦æ‘¸äº‹ä»¶
            handle.ontouchstart = dragStart;
            
            // ç»‘å®š click äº‹ä»¶ç”¨äºåœ¨éæ‹–åŠ¨æƒ…å†µä¸‹è§¦å‘å±‚çº§æå‡ï¼ˆå¯¹äºéšæœºå¼¹çª—ï¼‰
            handle.addEventListener('click', (e) => {
                 if (e.target.tagName !== 'BUTTON' && element.className.includes('popup')) {
                     // å†æ¬¡ç¡®ä¿å±‚çº§æå‡
                     element.style.zIndex = ++currentZIndex;
                 }
            });
        }

        // ================== æ ¸å¿ƒåŠŸèƒ½å‡½æ•° ==================

        function createPopup() {
            if (Message_counting >= Count_message) {
                clearInterval(timerId); 
                createCenterPopup();
                return;
            }
            
            Message_counting++;

            const msg = messages[Math.floor(Math.random() * messages.length)];
            const bgColor = backgroudColors[Math.floor(Math.random() * backgroudColors.length)];
            
            const popup = document.createElement('div');
            popup.className = 'popup popup-animate'; 
            popup.style.backgroundColor = bgColor;
            
            // åˆå§‹å±‚çº§ä½¿ç”¨ currentZIndexï¼Œç¡®ä¿æ–°å¼¹å‡ºçš„åœ¨æœ€ä¸Šé¢
            popup.style.zIndex = ++currentZIndex; 

            // æ·»åŠ æ ‡é¢˜æ 
            const titleBar = document.createElement('div');
            titleBar.className = 'popup-title';
            titleBar.textContent = 'To å”å˜‰ç²';
            popup.appendChild(titleBar);

            // æ·»åŠ å†…å®¹åŒºåŸŸ
            const contentDiv = document.createElement('div');
            contentDiv.className = 'popup-content';
            contentDiv.textContent = msg;
            popup.appendChild(contentDiv);
            
            const vpWidth = window.innerWidth;
            const vpHeight = window.innerHeight;

            const x = Math.floor(Math.random() * (vpWidth - 250)) + 20; 
            const y = Math.floor(Math.random() * (vpHeight - 150)) + 20; 

            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;

            // ä½¿éšæœºå¼¹çª—å¯æ‹–åŠ¨ï¼Œç»‘å®šåˆ°æ•´ä¸ª popup å…ƒç´ 
            makeElementDraggable(popup); 

            body.appendChild(popup);
        }

        function createCenterPopup() {
            mainBox.style.display = 'none'; 
            
            centerModalContent.removeAttribute('hidden');
            const modalRect = centerModalContent.getBoundingClientRect();
            
            // è®¡ç®—ä½ç½®å®ç°å±…ä¸­
            centerModalContent.style.left = `${(window.innerWidth - modalRect.width) / 2}px`;
            centerModalContent.style.top = `${(window.innerHeight - modalRect.height) / 2}px`;
            centerModalContent.style.zIndex = 1000; // ç¡®ä¿æœ€ç»ˆå¼¹çª—åœ¨æœ€é¡¶å±‚

            // ä½¿ä¸­å¿ƒå¼¹çª—å¯æ‹–åŠ¨ï¼Œåªé€šè¿‡æ ‡é¢˜æ æ‹–åŠ¨
            makeElementDraggable(centerModalContent, centerModalTitle); 
        }

        function startPopups() {
            mainBox.style.display = 'none'; 
            
            document.querySelectorAll('.popup').forEach(p => p.remove());
            
            centerModalContent.setAttribute('hidden', '');
            Message_counting = 0;
            currentZIndex = 5; // é‡ç½®éšæœºå¼¹çª—çš„ Z-index è®¡æ•°å™¨

            timerId = setInterval(createPopup, Delay);
            
            // åœ¨å¼€å§‹å¼¹å‡ºæ—¶ï¼Œå°è¯•æ’­æ”¾éŸ³ä¹
            if (bgMusic.paused) {
                 bgMusic.play().then(() => {
                    musicIcon.textContent = 'ğŸ¶'; 
                }).catch(error => {
                    musicIcon.textContent = 'ğŸ”‡'; 
                });
            }
        }

        function clearAllPopups() {
            if (timerId) {
                clearInterval(timerId);
            }
            
            centerModalContent.setAttribute('hidden', '');
            
            document.querySelectorAll('.popup').forEach(p => {
                p.style.opacity = '0'; 
                setTimeout(() => p.remove(), 300); 
            });
            
            mainBox.style.display = 'flex';
            Message_counting = 0;
            currentZIndex = 5; // é‡ç½® Z-index è®¡æ•°å™¨
        }

        // ================== äº‹ä»¶ç›‘å¬ ==================
        startButton.addEventListener('click', startPopups);
        closeButton.addEventListener('click', clearAllPopups);

        // çª—å£å¤§å°æ”¹å˜æ—¶é‡æ–°å±…ä¸­æ¨¡æ€æ¡†
        window.addEventListener('resize', () => {
             if (!centerModalContent.hasAttribute('hidden')) {
                 const modalRect = centerModalContent.getBoundingClientRect();
                 centerModalContent.style.left = `${(window.innerWidth - modalRect.width) / 2}px`;
                 centerModalContent.style.top = `${(window.innerHeight - modalRect.height) / 2}px`;
             }
        });
        
    </script>

</body>
</html>


